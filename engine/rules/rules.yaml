rules:
  - alias: "Halo: Increase Flower Pot brightness"
    trigger:
      event: "halo.wheel"
      entity_name: "Flower Pot"
      state_change: "clockwise"
    action:
      - service: "hue.step_brightness"
        target:
          type: "light"
          id: "Flower Pot"
        params:
          direction: "up"
          step: "${payload.step}"

  - alias: "Halo: Decrease Flower Pot brightness"
    trigger:
      event: "halo.wheel"
      entity_name: "Flower Pot"
      state_change: "counter_clockwise"
    action:
      - service: "hue.step_brightness"
        target:
          type: "light"
          id: "Flower Pot"
        params:
          direction: "down"
          step: "${payload.step}"

  - alias: "Halo: update button with new hue state"
    trigger:
      event: "hue.light"
      entity_name: "flower pot"
      state_change: "brightness"
    action:
      - service: "halo.update_button_value"
        target:
          type: "button"
          id: "Flower pot"
        params:
          value: "${payload.brightness}"

  - alias: "Halo: on connect"
    trigger:
      event: "halo.system"
      state_change: "active"
    action:
        - service: "halo.update_button_value"
          target:
            type: "button"
            id: "Flower pot"
          params:
            value: "${state.hue.light.flower_pot:brightness}"

